<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OZO: ozo::connection_pool&lt; Source &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OZO
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classozo_1_1connection__pool.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#related">Related Functions</a> &#124;
<a href="classozo_1_1connection__pool-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ozo::connection_pool&lt; Source &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__group-connection.html">Database connection</a> &raquo; <a class="el" href="group__group-connection-types.html">Types</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="connection__pool_8h_source.html">connection_pool.h</a>&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<div class="textblock"><h3>template&lt;typename Source&gt;<br />
class ozo::connection_pool&lt; Source &gt;</h3>

<p>Connection pool implementation</p>
<p>This is a simple <a href="https://en.wikipedia.org/wiki/Connection_pool">connection pool</a> implementation which can store up to maximum allowed number of connection to the same database. If all connections are busy client request will be placed into the internal queue to wait for free connection. If where is no free connections but it does not hit the limit of connections the new connection will be created via underlying <a class="el" href="group__group-connection-concepts.html#gaeb64411053912bede2d7d7ad7c8057b3" title="ConnectionSource concept. ">ConnectionSource</a> being specified in constructor. All operations are timed out. Connection idle life time is timed out as well. Pool is configurable via constructor and operator(). </p>
<p><code><a class="el" href="classozo_1_1connection__pool.html" title="Connection pool implementationThis is a simple connection pool implementation which can store up to m...">connection_pool</a></code> models <a class="el" href="group__group-connection-concepts.html#gaeb64411053912bede2d7d7ad7c8057b3" title="ConnectionSource concept. ">ConnectionSource</a> concept itself using underlying <a class="el" href="group__group-connection-concepts.html#gaeb64411053912bede2d7d7ad7c8057b3" title="ConnectionSource concept. ">ConnectionSource</a>.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Source</td><td>&mdash; underlying <a class="el" href="group__group-connection-concepts.html#gaeb64411053912bede2d7d7ad7c8057b3" title="ConnectionSource concept. ">ConnectionSource</a> which is being used to create connection to a database. </td></tr>
  </table>
  </dd>
</dl>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Types</h2></td></tr>
<tr class="memitem:a840a2be131854035662ddd91ba166148"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classozo_1_1connection__pool.html#a840a2be131854035662ddd91ba166148">connection_type</a> = impl::pooled_connection_ptr&lt; Source &gt;</td></tr>
<tr class="memdesc:a840a2be131854035662ddd91ba166148"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of connection depends on connection type of Source.  <a href="#a840a2be131854035662ddd91ba166148">More...</a><br /></td></tr>
<tr class="separator:a840a2be131854035662ddd91ba166148"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acc753075bef06f8faf28b1db68c3617c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classozo_1_1connection__pool.html#acc753075bef06f8faf28b1db68c3617c">connection_pool</a> (Source source, const <a class="el" href="structozo_1_1connection__pool__config.html">connection_pool_config</a> &amp;config)</td></tr>
<tr class="memdesc:acc753075bef06f8faf28b1db68c3617c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new connection pool object.  <a href="#acc753075bef06f8faf28b1db68c3617c">More...</a><br /></td></tr>
<tr class="separator:acc753075bef06f8faf28b1db68c3617c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eab0de36606f6de94260f2613dec953"><td class="memTemplParams" colspan="2">template&lt;typename Handler &gt; </td></tr>
<tr class="memitem:a4eab0de36606f6de94260f2613dec953"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classozo_1_1connection__pool.html#a4eab0de36606f6de94260f2613dec953">operator()</a> (io_context &amp;io, Handler &amp;&amp;handler, const <a class="el" href="structozo_1_1connection__pool__timeouts.html">connection_pool_timeouts</a> &amp;timeouts=<a class="el" href="structozo_1_1connection__pool__timeouts.html">connection_pool_timeouts</a> {})</td></tr>
<tr class="memdesc:a4eab0de36606f6de94260f2613dec953"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides connection is binded to the given io_context.  <a href="#a4eab0de36606f6de94260f2613dec953">More...</a><br /></td></tr>
<tr class="separator:a4eab0de36606f6de94260f2613dec953"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="related"></a>
Related Functions</h2></td></tr>
<tr><td class="ititle" colspan="2"><p>(Note that these are not member functions.) </p>
</td></tr>
<tr class="memitem:ga7ee79e815277defd86c9268c002f9143"><td class="memTemplParams" colspan="2">template&lt;typename Source &gt; </td></tr>
<tr class="memitem:ga7ee79e815277defd86c9268c002f9143"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__group-connection-functions.html#ga7ee79e815277defd86c9268c002f9143">make_connection_pool</a> (Source &amp;&amp;source, const <a class="el" href="structozo_1_1connection__pool__config.html">connection_pool_config</a> &amp;config)</td></tr>
<tr class="memdesc:ga7ee79e815277defd86c9268c002f9143"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connection pool construct helper function.  <a href="group__group-connection-functions.html#ga7ee79e815277defd86c9268c002f9143">More...</a><br /></td></tr>
<tr class="separator:ga7ee79e815277defd86c9268c002f9143"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Types</h2>
<a id="a840a2be131854035662ddd91ba166148"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840a2be131854035662ddd91ba166148">&#9670;&nbsp;</a></span>connection_type</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Source &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classozo_1_1connection__pool.html">ozo::connection_pool</a>&lt; Source &gt;::<a class="el" href="classozo_1_1connection__pool.html#a840a2be131854035662ddd91ba166148">connection_type</a> =  impl::pooled_connection_ptr&lt;Source&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of connection depends on connection type of Source. </p>
<p>Type is used to model <a class="el" href="group__group-connection-concepts.html#gaeb64411053912bede2d7d7ad7c8057b3" title="ConnectionSource concept. ">ConnectionSource</a> </p>

</div>
</div>
<h2 class="groupheader">Constructors</h2>
<a id="acc753075bef06f8faf28b1db68c3617c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc753075bef06f8faf28b1db68c3617c">&#9670;&nbsp;</a></span>connection_pool()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Source &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classozo_1_1connection__pool.html">ozo::connection_pool</a>&lt; Source &gt;::<a class="el" href="classozo_1_1connection__pool.html">connection_pool</a> </td>
          <td>(</td>
          <td class="paramtype">Source&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structozo_1_1connection__pool__config.html">connection_pool_config</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new connection pool object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>&mdash; <a class="el" href="group__group-connection-concepts.html#gaeb64411053912bede2d7d7ad7c8057b3" title="ConnectionSource concept. ">ConnectionSource</a> object which is being used to create connection to a database. </td></tr>
    <tr><td class="paramname">config</td><td>&mdash; pool configuration. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4eab0de36606f6de94260f2613dec953"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4eab0de36606f6de94260f2613dec953">&#9670;&nbsp;</a></span>operator()()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Source &gt; </div>
<div class="memtemplate">
template&lt;typename Handler &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classozo_1_1connection__pool.html">ozo::connection_pool</a>&lt; Source &gt;::operator() </td>
          <td>(</td>
          <td class="paramtype">io_context &amp;&#160;</td>
          <td class="paramname"><em>io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Handler &amp;&amp;&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structozo_1_1connection__pool__timeouts.html">connection_pool_timeouts</a> &amp;&#160;</td>
          <td class="paramname"><em>timeouts</em> = <code><a class="el" href="structozo_1_1connection__pool__timeouts.html">connection_pool_timeouts</a>&#160;{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Provides connection is binded to the given io_context. </p>
<p>In case of success the handler will be called with no <code>error_code</code> and established connection object. If no connection available and number of connections of the pool does not hit the limit - a new connection will be made. If pool is out of limits - the handler will be placed into the internal queue to wait for free connection.</p>
<p>In case of time-out of connection establishing or being in queue - the handler will be called with error_code.</p>
<p>In case of hitting the limit of the internal queue - the handler will be called with error_code.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io</td><td>&mdash; <code>io_context</code> for the connection IO. </td></tr>
    <tr><td class="paramname">handler</td><td>&mdash; a callback with signature <code>void(error_code, connection_type)</code>. </td></tr>
    <tr><td class="paramname">timeouts</td><td>&mdash; connection acquisition related time-outs </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/ozo/<a class="el" href="connection__pool_8h_source.html">connection_pool.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceozo.html">ozo</a></li><li class="navelem"><a class="el" href="classozo_1_1connection__pool.html">connection_pool</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
